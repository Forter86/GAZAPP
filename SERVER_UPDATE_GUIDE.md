# Обновление Docker контейнера на сервере (Ubuntu 22.04)

Этот гайд поможет вам обновить приложение на вашем сервере с минимальным временем простоя.

## Изменения в Dockerfile
Я обновил `Dockerfile` в проекте. Теперь он использует **мульти-стейдж сборку**.
Это значит, что вам **НЕ нужно** выполнять `npm run build` вручную или на сервере перед сборкой контейнера. Docker сам скачает зависимости, соберет проект внутри себя и создаст готовый легкий образ.

---

## Инструкция по обновлению

Эти команды нужно выполнять в терминале вашего сервера (после подключения по SSH).

### 1. Перейдите в папку проекта
```bash
cd /путь/к/папке/вашего/проекта
# Например: cd /home/ubuntu/gazprom-app
```

### 2. Обновите код
Если используете Git:
```bash
git pull
```
*Если загружаете файлы вручную, просто перезапишите их поверх старых.*

### 3. Пересоберите образ
```bash
docker build -t gazprom-app .
# Точка в конце обязательна! Она означает "текущая директория"
```

### 4. Перезапустите контейнер
Удаляем старый и запускаем новый на основе свежего образа.

```bash
# Останавливаем текущий контейнер
docker stop gazprom-container || true

# Удаляем его
docker rm gazprom-container || true

# Запускаем новый
docker run -d -p 80:80 --restart unless-stopped --name gazprom-container gazprom-app
```

---

## Проверка работы

1.  Посмотрите, запустился ли контейнер:
    ```bash
    docker ps
    ```
2.  Если статус `Up`, значит все хорошо. Откройте ваш сайт в браузере.
